"use strict";const btnSearch=document.querySelector(".js-btnSearch"),seriesList=document.querySelector(".js-seriesList"),favoriteList=document.querySelector(".js-favoriteList");let series=[],favorites=[];function getSerie(){const e=document.querySelector(".js-inputSearch").value;fetch("http://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{series=e,paintList(),listenFavList()})}function paintList(){let e="";for(let t=0;t<series.length;t++){const s=series[t].show.image;e+=`<li class="js-serie seriesList__item" id="${series[t].show.id}">`,e+=series[t].show.name,null!==s?e+=`<img src="${series[t].show.image.medium}" alt="Poster ${series[t].show.name}" class="js-poster">`:null===s&&(e+=`<img src=" https://via.placeholder.com/210x295/ffffff/666666/?\n      text=TV" alt="Poster de ${series[t].show.name} class="js-poster">`),e+="</li>"}seriesList.innerHTML=e}let favoriteHtml="";const paintFavList=function(e){let t=parseInt(e.currentTarget.id);const s=e.currentTarget;for(const e of series){const i=e.show.image;t===e.show.id&&(t=e.show,-1===favorites.indexOf(t)&&(s.classList.add("favoriteSearch"),favorites.push(t),favoriteHtml+='<li class="favoritesList__item">',favoriteHtml+=e.show.name,null!==i?favoriteHtml+=`<img src="${e.show.image.medium}" alt="Poster ${e.show.name}" class="js-poster favoritesList__item--img">`:null===i&&(favoriteHtml+=`<img src=" https://via.placeholder.com/210x295/ffffff/666666/?\n        text=TV" alt="Poster de ${e.show.name} class="js-poster favoritesList__item--img">`),favoriteHtml+="</li>"))}favoriteList.innerHTML=favoriteHtml,setLocalStorage()};function setLocalStorage(){localStorage.setItem("favorites",JSON.stringify(favorites))}const localFav=JSON.parse(localStorage.getItem("favorites"));function getLocalStorage(){null!==localFav&&(favorites=localFav,rePaintFavList())}const rePaintFavList=function(){for(const e of favorites)favoriteHtml+='<li class="favoritesList__item">',favoriteHtml+=e.name,null!==e.image?favoriteHtml+=`<img src="${e.image.medium}" alt="Poster ${e.name}" class="js-poster favoritesList__item--img">`:null===e.image&&(favoriteHtml+=`<img src=" https://via.placeholder.com/210x295/ffffff/666666/?\n      text=TV" alt="Poster de ${e.name} class="js-poster favoritesList__item--img">`),favoriteHtml+="</li>";favoriteList.innerHTML=favoriteHtml},listenFavList=function(){const e=document.querySelectorAll(".js-serie");for(const t of e)t.addEventListener("click",paintFavList)};btnSearch.addEventListener("click",getSerie),getLocalStorage();